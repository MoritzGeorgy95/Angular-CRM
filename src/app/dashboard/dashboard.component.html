<div class="dashboard">
  <h1>Welcome {{usersService.currentlyLoggedInUserName}}!</h1>
  <div class="widget-container">
    <div
      class="widget date"
      cdkDrag
      cdkDragBoundary=".widget-container"
      #widget
      (cdkDragEnded)="getWidgetFinalPos($event)"
    >
      <h2>
        {{ formattedDate }}
      </h2>
    </div>

    <div
      class="widget weather"
      cdkDrag
      cdkDragBoundary=".widget-container"
      #widget
      (cdkDragEnded)="getWidgetFinalPos($event)"
    >
      <div *ngIf="cityName && temperature">
        <h2>
          {{ cityName }}
        </h2>
        <h2>{{ temperature }} CÂ°</h2>
        <img [src]="'assets/img/icons/' + weatherIcon + '.svg'" alt="" />
      </div>

      <div *ngIf="!cityName && !temperature" class="fetching-weather-container">
        <h2>Fetching weather data</h2>
        <mat-spinner></mat-spinner>
      </div>
    </div>
    <div
      class="widget notifications"
      cdkDrag
      cdkDragBoundary=".widget-container"
      #widget
      (cdkDragEnded)="getWidgetFinalPos($event)"
    >
      <div class="widget-description-container">
        <mat-icon>notifications</mat-icon>
        <h2>Notifications</h2>
      </div>
    </div>
    <div
      class="widget calendar"
      cdkDrag
      cdkDragBoundary=".widget-container"
      #widget
      (cdkDragEnded)="getWidgetFinalPos($event)"
      (click)="openCalendarViewDialog()"
    >
      <div class="widget-description-container">
        <mat-icon>calendar_month</mat-icon>
        <h2>Client Calendar</h2>
      </div>
    </div>
    <div
      class="widget notepad"
      cdkDrag
      cdkDragBoundary=".widget-container"
      #widget
      (cdkDragEnded)="getWidgetFinalPos($event)"
    >
      <div class="widget-description-container">
        <mat-icon>description</mat-icon>
        <h2>Notepad</h2>
      </div>
      <div class="notes-container">
        <ul>
          <li *ngFor="let note of notes$ | async">
            {{ note }}
          </li>
        </ul>
      </div>
      <mat-form-field class="note-input-field" appearance="outline">
        <mat-label>Add a note to your notepad</mat-label>
        <textarea matInput style="resize: none;" [(ngModel)]="currenNote"></textarea>
        <button mat-icon-button matSuffix (click)="saveNote()">
          <mat-icon>save</mat-icon>
        </button>
      </mat-form-field>
    </div>
    <button
      mat-fab
      class="add-user-btn"
      matTooltip="Add new Widget to dashboard"
      (click)="openAddWidgetDialog()"
    >
      <mat-icon>add</mat-icon>
    </button>
  </div>
</div>
